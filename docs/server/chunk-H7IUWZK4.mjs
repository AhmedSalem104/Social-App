import './polyfills.server.mjs';
import{k as d}from"./chunk-FTZFH2EY.mjs";import{a as n}from"./chunk-KM5PY7WN.mjs";import{v as h}from"./chunk-SZOCP5LK.mjs";import{M as l,R as c,S as p,Ya as u}from"./chunk-QBPLAOC7.mjs";var i=class extends Error{};i.prototype.name="InvalidTokenError";function f(r){return decodeURIComponent(atob(r).replace(/(.)/g,(t,o)=>{let e=o.charCodeAt(0).toString(16).toUpperCase();return e.length<2&&(e="0"+e),"%"+e}))}function m(r){let t=r.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return f(t)}catch{return atob(t)}}function g(r,t){if(typeof r!="string")throw new i("Invalid token specified: must be a string");t||(t={});let o=t.header===!0?0:1,e=r.split(".")[o];if(typeof e!="string")throw new i(`Invalid token specified: missing part #${o+1}`);let s;try{s=m(e)}catch(a){throw new i(`Invalid token specified: invalid base64 for part #${o+1} (${a.message})`)}try{return JSON.parse(s)}catch(a){throw new i(`Invalid token specified: invalid json for part #${o+1} (${a.message})`)}}var y=(()=>{let t=class t{constructor(e){this._HttpClient=e,this.userData=null,this.profilePhoto=u(""),this._Router=p(d)}signup(e){return this._HttpClient.post(`${n.basUrl}users/signup`,e)}signin(e){return this._HttpClient.post(`${n.basUrl}users/signin`,e)}changePassword(e){return this._HttpClient.patch(`${n.basUrl}users/change-password`,e)}uploadProfilePhoto(e){return this._HttpClient.put(`${n.basUrl}users/upload-photo`,e)}GetLoggedUserData(){return this._HttpClient.get(`${n.basUrl}users/profile-data`)}saveUserData(){localStorage.getItem("socialToken")!==null&&(this.userData=g(JSON.stringify(localStorage.getItem("socialToken"))))}logOut(){localStorage.removeItem("socialToken"),this.userData=null,this._Router.navigate(["/signin"])}};t.\u0275fac=function(s){return new(s||t)(c(h))},t.\u0275prov=l({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})();export{y as a};
